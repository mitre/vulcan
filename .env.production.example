# Vulcan Production Environment Configuration (Docker)
# Copy this file to .env for production Docker deployments
#
# IMPORTANT: Generate secure secrets with: ./setup-docker-secrets.sh

# =============================================================================
# REQUIRED: Database Configuration
# =============================================================================
# Generate with: openssl rand -hex 33
POSTGRES_PASSWORD=CHANGE_ME_USE_SETUP_SCRIPT

# =============================================================================
# REQUIRED: Rails Security Keys
# =============================================================================
# Generate with: ./setup-docker-secrets.sh or openssl rand -hex 64
SECRET_KEY_BASE=CHANGE_ME_USE_SETUP_SCRIPT
CIPHER_PASSWORD=CHANGE_ME_USE_SETUP_SCRIPT
CIPHER_SALT=CHANGE_ME_USE_SETUP_SCRIPT

# =============================================================================
# REQUIRED: Authentication (Configure at least one)
# =============================================================================

# --- Option 1: OIDC/OAuth2 (Recommended) ---
VULCAN_ENABLE_OIDC=true
VULCAN_OIDC_PROVIDER_TITLE=Your Organization
VULCAN_OIDC_ISSUER_URL=https://your-identity-provider.com
VULCAN_OIDC_CLIENT_ID=your_production_client_id
VULCAN_OIDC_CLIENT_SECRET=your_production_client_secret
VULCAN_OIDC_REDIRECT_URI=https://vulcan.your-org.com/users/auth/oidc/callback

# With auto-discovery enabled (v2.2+), endpoints are discovered automatically
# from the issuer's /.well-known/openid-configuration endpoint
VULCAN_OIDC_DISCOVERY=true

# --- Option 2: LDAP/Active Directory ---
VULCAN_ENABLE_LDAP=false
# VULCAN_LDAP_HOST=ldap.your-org.com
# VULCAN_LDAP_PORT=636
# VULCAN_LDAP_ENCRYPTION=simple_tls
# VULCAN_LDAP_BASE=dc=your-org,dc=com
# VULCAN_LDAP_BIND_DN=cn=vulcan,ou=services,dc=your-org,dc=com
# VULCAN_LDAP_ADMIN_PASS=secure_ldap_password
# VULCAN_LDAP_TITLE=Corporate LDAP
# VULCAN_LDAP_ATTRIBUTE=sAMAccountName

# --- Option 3: Local Login (Not recommended for production) ---
VULCAN_ENABLE_LOCAL_LOGIN=false
VULCAN_ENABLE_USER_REGISTRATION=false
VULCAN_SESSION_TIMEOUT=60

# =============================================================================
# REQUIRED: Application Settings
# =============================================================================
VULCAN_APP_URL=https://vulcan.your-org.com
VULCAN_CONTACT_EMAIL=vulcan-admin@your-org.com
VULCAN_WELCOME_TEXT=Welcome to Your Organization's Vulcan Instance

# Project creation permissions
VULCAN_PROJECT_CREATE_PERMISSION_ENABLED=true

# =============================================================================
# OPTIONAL: Email Configuration
# =============================================================================
VULCAN_ENABLE_SMTP=true
VULCAN_SMTP_ADDRESS=smtp.your-org.com
VULCAN_SMTP_PORT=587
VULCAN_SMTP_DOMAIN=your-org.com
VULCAN_SMTP_AUTHENTICATION=plain
VULCAN_SMTP_ENABLE_STARTTLS_AUTO=true
VULCAN_SMTP_SERVER_USERNAME=vulcan@your-org.com  # Optional: Defaults to VULCAN_CONTACT_EMAIL
VULCAN_SMTP_SERVER_PASSWORD=secure_smtp_password

# Optional: Email confirmation for new users
VULCAN_ENABLE_EMAIL_CONFIRMATION=false

# =============================================================================
# OPTIONAL: Slack Integration
# =============================================================================
VULCAN_ENABLE_SLACK_COMMS=false
# VULCAN_SLACK_API_TOKEN=xoxb-your-production-token
# VULCAN_SLACK_CHANNEL_ID=C1234567890

# =============================================================================
# OPTIONAL: Container/Cloud Logging
# =============================================================================
# Enable structured logging for CloudWatch, Splunk, etc.
RAILS_LOG_TO_STDOUT=true
STRUCTURED_LOGGING=true

# =============================================================================
# OPTIONAL: Performance Tuning
# =============================================================================
# Rails performance settings
RAILS_MAX_THREADS=5
WEB_CONCURRENCY=2

# Force SSL in production (set to false for local/dev Kubernetes without ingress TLS)
FORCE_SSL=true

# Serve static files (required for Docker)
RAILS_SERVE_STATIC_FILES=true

# =============================================================================
# SSL CERTIFICATES (Corporate Proxy)
# =============================================================================
# If behind a corporate proxy, place certificates in ./certs/ directory
# See certs/README.md for instructions