<%= form_tag(test_path, method: "get", id: 'run_test', remote: true) do %>
  <div class="form-group row">
    <div class="col-lg-5 text-center text-right">
        <label class="control-label">Select Predefined Host Configuration</label>
        <select id="host_configs" class="form-control">
          <% current_user.host_configs.each do |config| %>
           <% puts config.inspect %>
            <option value="<%= config.id %>">
              <% if config.transport_method == 'SSH' %>
                <%= "SSH - " + config.user + " - " + config.host + ' - ' + config.port %>
              <% elsif config.transport_method == 'Docker' %>
                <%= "Docker - " + config.user + " - " + config.host + ' - ' + config.port %>
              <% elsif config.transport_method == 'AWS' %>
                <%= "AWS - " + (config.aws_region || 'null') + ' - ' + (config.aws_profile || 'null') %>
              <% end %>
            </option>
          <% end %>
        </select>
    </div>
    <div class="col-lg-1 text-center text-right">
        <label class="control-label">OR</label>
    </div>
    <div class="col-lg-6 text-center text-right">
      <%= hidden_field_tag 'control_id',nil, id: 'control_id' %>
      <label class="control-label">Manually Enter (saved data will be encrypted)</label>
      <div class="row">
        <div class="col-lg-4 text-center text-right">
            <label class="control-label">Method</label>
            <%= select_tag "transport_method", options_for_select([['local', 'local'], ['SSH', 'ssh'], ['Docker', 'docker'], ['AWS', 'aws']]), class: "form-control" %>
        </div>
        <div class="col-sm-2">
          <label class="control-label">Run Test</label>
          <%= submit_tag 'Run Test', class: 'btn btn-success' %>
        </div>
        <div class="col-sm-2">
          <label class="control-label">Save</label>
          <span role="button" class="btn btn-icon waves-effect waves-light btn-primary" onclick="add_host_config(<%= current_user.id %>, $('#host').val(), $('#user').val(), $('#pass').val(), $('#port').val(), $('#transport_method').val())">
            <i class="ti-plus"></i>
          </span>
        </div>
      </div>
      <div class="row" id="host_row" style='display:none;'>
        <div class="col-lg-3 text-center text-right">
            <label class="control-label">Username</label>
            <%= text_field_tag :user,nil, class: "form-control" %>
        </div>
        <div class="col-lg-3 text-center text-right">
            <label class="control-label">User Password</label>
            <%= text_field_tag :pass,nil, class: "form-control" %>
        </div>
        <div class="col-lg-3 text-center text-right">
            <label class="control-label">Host Name</label>
            <%= text_field_tag :host,nil, class: "form-control" %>
        </div>
        <div class="col-lg-3 text-center text-right">
            <label class="control-label">port</label>
            <%= text_field_tag :port, nil, class: "form-control" %>
        </div>
      </div>
      <div class="row" id="sudo_row" style='display:none;'>
        <div class="col-lg-1 col-sm-3 text-center text-right">
            <label class="control-label">Sudo?</label>
            <input type="checkbox" data-plugin="switchery" data-color="#00b19d"/>
        </div>
        <div class="col-lg-3 text-center text-right">
            <label class="control-label">Sudo Username</label>
            <%= text_field_tag :sudo_user, nil,  class: "form-control" %>
        </div>
        <div class="col-lg-4 text-center text-right">
            <label class="control-label">Sudo Password</label>
            <%= text_field_tag :sudo_pass, nil,  class: "form-control" %>
        </div>
        <div class="col-lg-4 text-center text-right">
            <label class="control-label">Sudo Options</label>
            <%= text_field_tag :sudo_options, nil,  class: "form-control" %>
        </div>
      </div>
      
      <div class="row" id="aws_row" style="display:none;">
        <div class="col-lg-4 text-center text-right">
            <label class="control-label">AWS Region</label>
            <%= text_field_tag :aws_region, nil,  class: "form-control" %>
        </div>
        <div class="col-lg-4 text-center text-right">
            <label class="control-label">AWS Profile</label>
            <%= text_field_tag :aws_profile, nil,  class: "form-control" %>
        </div>
        <div class="col-lg-4 text-center text-right">
            <label class="control-label">AWS Access Key</label>
            <%= text_field_tag :aws_access, nil,  class: "form-control" %>
        </div>
      </div>
    </div>
  </div>
<% end %>