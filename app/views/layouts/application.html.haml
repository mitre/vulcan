!!!
%html
  %head
    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}/
    %meta{:name => "viewport", :content => "width=device-width, initial-scale=1, shrink-to-fit=no"}/
    %title Vulcan Profile Builder
    = csrf_meta_tags
    = csp_meta_tag
    = vite_client_tag
    = vite_javascript_tag 'application'

    :javascript
      // Color mode initialization - runs before Vue to prevent flash
      (function() {
        var stored = localStorage.getItem('vulcan-color-mode');
        var mode = stored || 'light';
        if (mode === 'auto') {
          mode = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }
        document.documentElement.setAttribute('data-bs-theme', mode);
      })();

      // Bootstrap data for SPA
      window.vueAppData = {
        signedIn: #{user_signed_in?.to_json},
        currentUser: #{current_user.to_json},
        csrfToken: '#{form_authenticity_token}',
        banner: {
          enabled: #{Settings.banner.enabled.to_json},
          text: #{Settings.banner.text.to_json},
          backgroundColor: #{Settings.banner.background_color.to_json},
          textColor: #{Settings.banner.text_color.to_json}
        },
        // Auth configuration for login page
        localLoginEnabled: #{Settings.local_login.enabled.to_json},
        registrationEnabled: #{Settings.user_registration.enabled.to_json},
        authProviders: #{auth_providers.to_json}
      };
  %body
    #app
